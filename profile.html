<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Profiles</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body class="bg-gray-100 text-gray-800 min-h-screen flex flex-col items-center p-6">

  <h1 class="text-3xl font-bold mb-6">My Profiles</h1>

  <div id="profileContainer" class="w-full max-w-md space-y-4"></div>

  <script>
    // Social media icons
    const icons = {
      facebook: "fab fa-facebook-f",
      youtube: "fab fa-youtube",
      instagram: "fab fa-instagram",
      github: "fab fa-github",
      twitter: "fab fa-twitter"
    };

    // Parse ?data=... from URL
    const params = new URLSearchParams(window.location.search);
    const data = params.get("data");
    const container = document.getElementById("profileContainer");

    if (data) {
      try {
        const links = JSON.parse(data);
        links.forEach(({ platform, link }) => {
          const icon = icons[platform.toLowerCase()] || "fas fa-link";
          const item = document.createElement("a");
          item.href = link;
          item.target = "_blank";
          item.className = "flex items-center gap-3 bg-white shadow p-4 rounded hover:bg-gray-50 transition";

          item.innerHTML = `
            <i class="${icon} text-xl w-6 text-blue-500"></i>
            <span class="break-all">${link}</span>
          `;

          container.appendChild(item);
        });
      } catch (err) {
        container.innerHTML = "<p class='text-red-500'>Error loading profile links.</p>";
      }
    } else {
      container.innerHTML = "<p class='text-gray-500'>No data found in the QR code.</p>";
    }
  </script>

</body>
</html>
