<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Multi-Link QR Code Generator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center justify-center p-6">
  <div class="bg-white p-6 rounded shadow-md w-full max-w-md">
    <h1 class="text-2xl font-bold mb-4">Add Your Profiles</h1>

    <div id="linkList" class="space-y-4 mb-4">
      <!-- Links will be added here -->
    </div>

    <button onclick="addLink()" class="bg-green-500 text-white px-4 py-2 rounded mb-4 w-full">Add Another Link</button>
    <button onclick="generateQR()" class="bg-blue-500 text-white px-4 py-2 rounded w-full">Generate QR</button>

    <div id="qrcode" class="mt-6 flex justify-center"></div>
  </div>

<script>
  const platforms = ["Facebook", "YouTube", "Instagram", "GitHub", "Twitter"];

  function addLink() {
    const container = document.getElementById('linkList');
    const div = document.createElement('div');
    div.className = "flex space-x-2";
    div.innerHTML = `
      <select class="platform border p-2 w-1/3">
        ${platforms.map(p => `<option value="${p.toLowerCase()}">${p}</option>`).join('')}
      </select>
      <input type="text" class="profileLink border p-2 w-2/3" placeholder="Paste link here">
    `;
    container.appendChild(div);
  }


  function generateQR() {
    const allLinks = [];
    document.querySelectorAll('#linkList > div').forEach(div => {
        const platform = div.querySelector('.platform').value;
        const link = div.querySelector('.profileLink').value;
        if (link.trim() !== "") {
            allLinks.push({ platform, link });
        }
    });

    if (allLinks.length === 0) {
        alert("Please add at least one profile link!");
        return;
    }

    // Use your local IP address here
    const fullUrl = `https://charlespura.github.io/qr-generator/profile.html?data=${encodeURIComponent(JSON.stringify(allLinks))}`;

    const qrContainer = document.getElementById('qrcode');
    qrContainer.innerHTML = ""; // Clear old QR

    new QRCode(qrContainer, {
        text: fullUrl,
        width: 200,
        height: 200
    });
}

</script>

</body>
</html>
